---

## ✅ 프론트엔드 기능명세서 – 상담 데이터 상세보기

### 1. **화면 레이아웃 및 디자인 명세**

* **페이지 경로**: `app/admin/counsel/[id]/page.tsx`
* **페이지 전용 컴포넌트**: `app/admin/counsel/[id]/AdminCounselDetail.tsx`
* **기능 설명**:
  * 상담 데이터 1건의 상세 정보를 카드 형태로 표시
  * 주요 정보(이름, 연락처, 신청일자, 상태, 메모 등) 표시
  * 연락처 등 개인정보는 마스킹 처리
  * [이전으로] 버튼 제공 (목록으로 이동)
* **사용 컴포넌트**:
  * `components/ui/card.tsx` (🟢 **ShadCN 컴포넌트**)
  * `components/ui/button.tsx` (🟢 **ShadCN 컴포넌트**)

```plaintext
[페이지 구조]

┌──────────────────────────────┐
│  [어드민 헤더]               │
│  ┌────────────[카드]───────┐ │
│  │ 이름: 홍길동             │
│  │ 연락처: 010-****-5678    │
│  │ 신청일자: 2025-05-18     │
│  │ 상태: 대기중             │
│  │ 메모: ...                │
│  └─────────────────────────┘ │
│  [이전으로] 버튼             │
└──────────────────────────────┘
```

---

### 2. **사용자 흐름 및 상호작용**

* 사용자는 상담 목록에서 특정 행 클릭 → 상세 페이지로 이동
* 서버에서 해당 상담 데이터 Fetch → 상세 정보 출력
* [이전으로] 버튼 클릭 시 목록 페이지(`/admin`)로 이동

---

### 3. **API 연동**

* **데이터 요청**: `GET /api/admin/counsels/[id]`
* 데이터는 `getServerSideProps` 혹은 `server component`로 서버 측에서 요청
* 초기 로딩 시 한 번 호출 (상세 조회용)

---

### 4. **테스트 항목**

* [ ] 상세 페이지 접근 시 해당 상담 데이터가 정확히 표시되는가?
* [ ] 연락처 등 개인정보가 마스킹되어 표시되는가?
* [ ] 데이터 없을 경우 404 또는 안내 메시지가 출력되는가?
* [ ] [이전으로] 버튼이 정상 동작하는가?
* [ ] 로딩/에러 상태가 적절히 처리되는가?

---

## ✅ 백엔드 기능명세서 – 상담 데이터 상세보기 API

### 1. **API 정의**

* **파일 경로**: `app/api/admin/counsels/[id]/route.ts`
* **메서드**: `GET`
* **사용 기술**: Next.js Route Handler + DrizzleORM
* **엔드포인트**: `/api/admin/counsels/[id]`
* **응답 예시**:

```ts
{
  id: "clxyz",
  name: "홍길동",
  phone: "010-1234-5678",
  createdAt: "2025-05-18T14:22:00.000Z",
  status: "대기중",
  memo: "상담 요청 내용..."
}
```

---

### 2. **데이터베이스 설계 및 연동**

* **테이블명**: `counsels`
* **컬럼**:
  * `id: string`
  * `name: string`
  * `phone: string`
  * `createdAt: timestamp`
  * `status: enum('대기중', '상담완료')`
  * `memo: string`
* **쿼리 동작**:
  * `SELECT * FROM counsels WHERE id = ?`

---

### 3. **테스트 항목**

* [ ] API 호출 시 해당 id의 상담 데이터가 반환되는가?
* [ ] 데이터 없을 때 404 또는 에러 메시지 반환
* [ ] DB 연결 실패 시 에러 처리되는가?
* [ ] 개인정보(연락처 등) 마스킹 처리 여부 확인
* [ ] 인증된 관리자만 접근 가능한가?

---

### ✅ 추가/보완 포인트

- 개인정보(연락처 등) 마스킹 처리
- 인증된 관리자만 접근 가능 (API/페이지 모두)
- 로딩/에러/빈 상태 UI 처리
- API 응답 구조 표준화 (`{ data, error }`)
- 접근 로그 기록(선택)
- 향후 상태변경, 메모 수정 등 확장 고려 